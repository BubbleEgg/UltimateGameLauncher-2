<!DOCTYPE html>
<html lang="en">

<head>
    <title>UltimateGameLauncher</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/all.css" integrity="sha256-46qynGAkLSFpVbEBog43gvNhfrOj+BmwXdxFgVK/Kvc=" crossorigin="anonymous" />
    <link rel="stylesheet" href="../css/app.css">
    <script src="../js/steam.js"></script>
    <script src="../js/imageUtils.js"></script>
    <script src="../js/apps.js"></script>
    <script src="../js/titleButtons.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/3.1.2/rollups/aes.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.js"></script>
</head>

<body>
    <div id="head">
        <div id="header">
            <div id="window-controls">
                <div class="button" id="min-button">
                    <span>&#xE921;</span>
                </div>
                <div class="button" id="max-button">
                    <span>&#xE922;</span>
                </div>
                <div class="button" id="restore-button">
                    <span>&#xE923;</span>
                </div>
                <div class="button" id="close-button">
                    <span>&#xE8BB;</span>
                </div>
            </div>
        </div>
        <div id="navbar-container">
            <ul id="navbar">
                <li>
                    <div class="navbar-header">UltimateGameLauncher</div>
                </li>
                <li>
                    <div id="nav-games" class="navbar-header" onclick="loadPage('games.html', this)">Games</div>
                </li>
                <li>
                    <div class="navbar-header" onclick="loadPage('users.html', this)">Users</div>
                </li>
                <li>
                    <div class="navbar-header" onclick="window.loadDataUser()">Settings</div>
                </li>
            </ul>
        </div>
    </div>
    <div id="content"></div>
    <script>
        try {
            $ = jQuery = module.exports;
        } catch(e) {}

        app_loadData();

        const SteamAuth = require("steamauth");
        const electron = require("electron");
        const {ipcRenderer} = electron;
        const fs = require('fs');

        ipcRenderer.on("message", function(event, text){
            console.log(text);
        });

        function loadPage(page, elem){
            loadPageContent(page, document.getElementById("content"));
            for (const o of document.querySelectorAll(".navbar-header")) {
                if(o.classList.contains("active"))
                    o.classList.remove("active");
            }
            elem.classList.add("active");
        }

        function loadPageContent(page, container){
            console.log("loading in content: "+__dirname +"\\"+ page);
            fs.readFile(__dirname +"\\"+ page, (err, data) => {
                container.innerHTML = data
                var scripts = container.getElementsByTagName("script");
                for (var i = 0; i < scripts.length; i++) {
                    eval(scripts[i].innerText);
                }
            });
        }

        loadPage("games.html", document.getElementById("nav-games"));
    </script>
</body>

</html>